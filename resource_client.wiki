#summary リソースクライント

== 導入 ==

BEAR.Sundayの各種リソースをリクエストすることができるのがリソースクライントです。リクエストメソッド、URI、引き数等を指定してリソースリクエストを組み立ててリソースにリクエストをします。

== 準備 ==
リソースクライアントをインジェクトします。用意してtraitでリソースリクエストオブジェクトを受け取りるのが便利です。

{{{
use BEAR\Framework\Inject\ResourceInject;

class Edit extends Page
{
    use ResourceInject;
}}}

== リクエストDSL ==

{{{
$this
->resource
->get
->uri('app://self/blog/posts')
->withQuery(['id' => $id])
->eager
->request();
}}}

例えばこれは
リクエストオブジェクトはリクエストに必要な知識をもったオブジェクトです。テンプレートにアサインし、遅延評価することもできます。

== リクエストタイミング ==

リソースのリクエストはlazyとeagerがありリクエストのタイミングに違いがあります。eagerリクエストはすぐにリソースリクエストが行われるのに対して、lazyではviewテンプレートで出現した時に行われます。

===lazyリクエスト===
{{{
$this['posts'] = $this->resource->get->uri('app://self/posts')->request();
}}}

===eagerリクエスト===
{{{
$this['posts'] = $this->resource->get->uri('app://self/posts')->eager->request();
}}}

== テンプレートでの表記== 

|| 文字列 || {$posts} || 結果がテンプレートエンジンでレンダリングされた文字列 || 
|| 配列 || {$posts['id']} || 結果の連想配列アクセス ||
|| オブジェクト || {$posts->header} || 結果のオブジェクトアクセス ||

※eagerでもlazyでもテンプレートの表記に違いはありません。